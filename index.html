<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‡¯ğŸ‡µ äº’å‹•å¼æ±äº¬å®¶åº­è‡ªåŠ©æ—…éŠè¡Œç¨‹ âœ¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Mochiy+Pop+One&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-bg: #fefbff;
            --sidebar-bg: #ffffff;
            --content-bg: #ffffff;
            --nav-hover-bg: #fce7f3;
            --nav-active-bg: linear-gradient(135deg, #f9a8d4, #f472b6);
            --nav-text: #be185d;
            --nav-active-text: #ffffff;
            --card-border: #fbcfe8;
            --title-color: #db2777;
            --text-color: #374151;
            --warning-bg: #fef2f2;
            --warning-border: #f87171;
            --caution-bg: #fffbeb;
            --caution-border: #f59e0b;
            --tip-bg: #f0fdf4;
            --tip-border: #4ade80;
            --tab-bg: #fdf2f8;
            --tab-active-bg: #f472b6;
            --tab-text: #db2777;
            --tab-active-text: #ffffff;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
        }
        h1, h2, h3, h4, h5 {
            font-family: 'Mochiy+Pop+One', sans-serif;
        }
        .main-layout { display: flex; }
        .sidebar {
            width: 250px;
            background-color: var(--sidebar-bg);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            padding: 1.5rem;
            border-right: 1px solid #f3e8ff;
            transition: transform 0.3s ease-in-out;
            z-index: 100;
        }
        .main-content {
            margin-left: 250px;
            width: calc(100% - 250px);
            padding: 2.5rem;
        }
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-weight: 500;
            color: var(--nav-text);
            transition: all 0.2s ease;
        }
        .nav-link:hover {
            background-color: var(--nav-hover-bg);
            transform: translateX(5px);
        }
        .nav-link.active {
            background: var(--nav-active-bg);
            color: var(--nav-active-text);
            box-shadow: 0 4px 15px -2px rgba(244, 114, 182, 0.4);
        }
        .nav-link svg { transition: all 0.2s ease; }
        .nav-link.active svg { fill: white; }
        .content-section {
            display: none;
            animation: fadeInContent 0.6s ease;
        }
        .content-section.active { display: block; }
        .card {
            background-color: var(--content-bg);
            padding: 1.5rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
            border: 1px solid var(--card-border);
        }
        .details-table{width:100%;border-collapse:collapse;margin-top:1rem;font-size: 0.9rem;}.details-table th,.details-table td{border:1px solid #e5e7eb;padding:.75rem;text-align:left;vertical-align:top}.details-table th{background-color:#f9fafb;width:100px;font-weight:bold;}
        .warning-box{background-color:var(--warning-bg);border-left:4px solid var(--warning-border);padding:1rem;border-radius:.5rem}
        .caution-box{background-color:var(--caution-bg);border-left:4px solid var(--caution-border);padding:1rem;border-radius:.5rem}
        .tip-box{background-color:var(--tip-bg);border-left:4px solid var(--tip-border);padding:1rem;border-radius:.5rem}
        .flight-card{background:linear-gradient(135deg,#fdf2f8,#fce7f3);border:1px solid var(--card-border)}
        .day-tab-button, .todo-tab-button {background-color:var(--tab-bg);color:var(--tab-text);font-weight:700;padding:.5rem 1.25rem;border-radius:9999px;transition:all .3s ease}.day-tab-button.active, .todo-tab-button.active{background-color:var(--tab-active-bg);color:var(--tab-active-text);transform:translateY(-2px);box-shadow:0 4px 10px rgba(244,114,182,.3)}
        .day-plan-content, .todo-content {display:none}.day-plan-content.active, .todo-content.active {display:block;animation:fadeInContent 0.5s ease;}
        .summary-box { background-color: #f3f4f6; padding: 1rem; border-radius: 0.5rem; margin-top: 1rem; }
        .todo-item { display: flex; align-items: flex-start; }
        .todo-item input { margin-top: 5px; }
        .mobile-header { display: none; }
        
        /* Responsive */
        @media (max-width: 768px) {
            body { padding-top: 60px; }
            .sidebar { display: none; }
            .main-content { margin-left: 0; width: 100%; padding: 1.5rem; }
            .mobile-header {
                display: flex;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                background-color: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                z-index: 90;
                box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            }
            .mobile-nav-link {
                flex: 1;
                text-align: center;
                padding: 0.75rem 0.1rem;
                font-size: 0.7rem; /* Adjusted font size for 6 items */
                color: var(--nav-text);
                border-bottom: 3px solid transparent;
                transition: all 0.2s ease;
            }
            .mobile-nav-link.active {
                color: var(--title-color);
                border-bottom-color: var(--title-color);
            }
            .details-table { font-size: 12px; }
            .details-table th, .details-table td { padding: 0.5rem; }
        }
        @keyframes fadeInContent { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }
        /* Modal styles */
        .modal{display:none;position:fixed;z-index:100;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.6);animation:fadeIn .3s}.modal-content{position:relative;margin:5% auto;padding:20px;width:90%;max-width:800px;animation:slideIn .3s}.close-button{position:absolute;top:-15px;right:-15px;width:36px;height:36px;border-radius:50%;background:#fff;color:#333;font-size:24px;line-height:36px;text-align:center;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.2)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideIn{from{transform:translateY(-50px)}to{transform:translateY(0)}}.map-container{position:relative;overflow:hidden;width:100%;padding-top:56.25%}.map-container iframe{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%;border:0}
    </style>
</head>
<body>
    <!-- Mobile Header -->
    <header class="mobile-header">
        <a href="#" class="mobile-nav-link active" onclick="showSection('overview', event)">âœ¨ ç¸½è¦½</a>
        <a href="#" class="mobile-nav-link" onclick="showSection('daily-plan', event)">ğŸ—“ï¸ è¡Œç¨‹</a>
        <a href="#" class="mobile-nav-link" onclick="showSection('expenses', event)">ğŸ’° èŠ±è²»</a>
        <a href="#" class="mobile-nav-link" onclick="showSection('shopping-list', event)">ğŸ›ï¸ å¾…è²·</a>
        <a href="#" class="mobile-nav-link" onclick="showSection('todo-list', event)">âœ… å¾…è¾¦</a>
        <a href="#" class="mobile-nav-link" onclick="showSection('resources', event)">ğŸ’¡ è³‡è¨Š</a>
    </header>

    <div class="main-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="text-center mb-10">
                <h1 class="text-2xl font-bold text-[var(--title-color)]">ğŸ‡¯ğŸ‡µ æ±äº¬ä¹‹æ—…</h1>
                <p class="text-sm text-gray-400">å®¶åº­è¡Œç¨‹è¦åŠƒ</p>
            </div>
            <nav class="space-y-3">
                <a href="#" class="nav-link active" onclick="showSection('overview', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg><span>è¡Œç¨‹ç¸½è¦½</span></a>
                <a href="#" class="nav-link" onclick="showSection('daily-plan', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg><span>æ¯æ—¥è¡Œç¨‹</span></a>
                <a href="#" class="nav-link" onclick="showSection('expenses', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M2 4a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V4zm2 2a1 1 0 00-1 1v2a1 1 0 001 1h12a1 1 0 001-1V7a1 1 0 00-1-1H4zM4 12a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1v-2zm5 0a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1h-1a1 1 0 01-1-1v-2zm5 0a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1h-1a1 1 0 01-1-1v-2z"></path></svg><span>æ¯æ—¥èŠ±è²»</span></a>
                <a href="#" class="nav-link" onclick="showSection('shopping-list', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"></path></svg><span>å¾…è²·æ¸…å–®</span></a>
                <a href="#" class="nav-link" onclick="showSection('todo-list', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path><path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path></svg><span>å¾…è¾¦äº‹é …</span></a>
                <a href="#" class="nav-link" onclick="showSection('resources', event)"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><span>å…¶ä»–è³‡è¨Š</span></a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <section id="overview" class="content-section active">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">è¡Œç¨‹ç¸½è¦½</h2>
                <div class="space-y-6">
                    <div class="card"><h3 class="font-bold text-xl mb-3 text-purple-600">ğŸ’° ç¸½é ç®—ä¼°è¨ˆ</h3><ul class="list-disc list-inside bg-pink-50 p-4 rounded-md space-y-1"><li><strong>äº¤é€š+ä½å®¿ï¼š</strong> ç´„20,000-30,000å…ƒ</li><li><strong>ç”¨é¤+æ™¯é»ï¼š</strong> ç´„15,000-25,000å…ƒ</li><li><strong>è³¼ç‰©+é›œè²»ï¼š</strong> å»ºè­°é ç•™10,000-20,000å…ƒ</li><li><strong>ç¸½è¨ˆï¼š</strong> 45,000-75,000å…ƒï¼ˆä¸å«æ©Ÿç¥¨ï¼‰</li></ul></div>
                    <div class="card"><h3 class="font-bold text-xl mb-4 text-purple-600">âœˆï¸ èˆªç­è³‡è¨Š</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flight-card p-4 rounded-xl space-y-2"><p class="font-bold text-lg text-pink-600">ğŸ›« å»ç¨‹</p><p><strong>èˆªç­ï¼š</strong> ä¸­è¯èˆªç©º CI220</p><p><strong>æ™‚é–“ï¼š</strong> 09:00 â†’ 13:10</p><p><strong>æ©Ÿå ´ï¼š</strong> å°åŒ—æ¾å±± (TSA) â†’ æ±äº¬ç¾½ç”° (HND)</p></div><div class="flight-card p-4 rounded-xl space-y-2"><p class="font-bold text-lg text-pink-600">ğŸ›¬ å›ç¨‹</p><p><strong>èˆªç­ï¼š</strong> ä¸­è¯èˆªç©º CI221</p><p><strong>æ™‚é–“ï¼š</strong> 14:30 â†’ 16:55</p><p><strong>æ©Ÿå ´ï¼š</strong> æ±äº¬ç¾½ç”° (HND) â†’ å°åŒ—æ¾å±± (TSA)</p></div></div><div class="caution-box mt-4 text-sm"><h4 class="font-bold mb-2">ä¸Šæ©Ÿæ³¨æ„</h4><ol class="list-decimal list-inside space-y-1"><li>æ‰˜é‹è¡Œæå…§è«‹å‹¿ç½®æ”¾è²´é‡ç‰©å“åŠé‹°é›»æ± ã€‚</li><li>æŒ‡ç”²åˆ€ã€å‰ªåˆ€ç­‰åˆ€å…·é¡è«‹ç½®æ”¾æ–¼æ‰˜é‹è¡Œæã€‚</li><li>ä¹³æ¶²ç‹€ç‰©å“éš¨èº«æ”œå¸¶ï¼Œæ¯ç“¶é™100CCï¼Œä¸¦ç½®æ–¼é€æ˜å¤¾éŠè¢‹ã€‚</li></ol></div></div>
                    <div class="card"><h3 class="font-bold text-xl mb-3 text-purple-600">ğŸ© ä½å®¿è³‡è¨Š</h3><p><strong>å“å·ç‹å­å¤§é£¯åº— (Shinagawa Prince Hotel) Main Tower</strong> - ä½ç½®ä¾¿åˆ©ï¼Œè¿‘å“å·è»Šç«™ã€‚</p></div>
                    <div class="card"><h3 class="font-bold text-xl mb-3 text-purple-600">ğŸ’³ æ—…è¡Œæ”¯ä»˜æ–¹å¼å»ºè­°</h3><ol class="list-decimal list-inside space-y-2 text-sm"><li><strong>è¡Œå‹•æ”¯ä»˜ (ç‰å±±Wallet+PayPay)</strong>: <br><span class="text-xs text-gray-500">ç›´æ¥æ‰£æ—¥åœ“å¸³æˆ¶ï¼Œäº«å›é¥‹ï¼Œé©ç”¨ç¯„åœå»£ã€‚</span></li><li><strong>äº¤é€šå¡ (Suica/ICOCA)</strong>: <br><span class="text-xs text-gray-500">æ–¹ä¾¿æ­ä¹˜äº¤é€šåŠå°é¡æ”¯ä»˜ã€‚</span></li><li><strong>ä¿¡ç”¨å¡ (ç‰å±±ç†Šæœ¬ç†Šå¡)</strong>: <br><span class="text-xs text-gray-500">é©åˆæŒ‡å®šé€šè·¯é«˜å–®åƒ¹è³¼ç‰©ã€‚</span></li><li><strong>ä¿¡ç”¨å¡ (è¯é‚¦å‰é¶´å¡)</strong>: <br><span class="text-xs text-gray-500">é©ç”¨æ–¼ä¸€èˆ¬æ¶ˆè²»ã€‚</span></li><li><strong>ç¾éˆ” (æ—¥åœ“)</strong>: <br><span class="text-xs text-gray-500">å‚™ç”¨ï¼Œé©ç”¨æ–¼å°åº—é‹ªã€‚</span></li></ol></div>
                </div>
            </section>

            <section id="daily-plan" class="content-section">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">æ¯æ—¥è¡Œç¨‹</h2>
                <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-6">
                    <button class="day-tab-button active" onclick="showDayPlan('plan-day1', event)">Day 1</button>
                    <button class="day-tab-button" onclick="showDayPlan('plan-day2', event)">Day 2</button>
                    <button class="day-tab-button" onclick="showDayPlan('plan-day3', event)">Day 3</button>
                    <button class="day-tab-button" onclick="showDayPlan('plan-day4', event)">Day 4</button>
                    <button class="day-tab-button" onclick="showDayPlan('plan-day5', event)">Day 5</button>
                </div>
                <!-- Day 1 Content -->
                <div id="plan-day1" class="day-plan-content active card">
                    <h3 class="text-xl font-bold text-center mb-4 text-cyan-500">Day 1: âœˆï¸ æŠµé”èˆ‡å°å ´åˆé«”é©—</h3>
                    <div class="space-y-4 mb-4">
                        <div class="warning-box"><p><strong>é‡è¦æé†’ï¼š</strong><br>å‡ºç™¼å‰è¦å…ˆå¡«å¯« <a href="https://event.liontravel.com/zh-tw/trends/japantravelinformation" target="_blank" class="text-blue-600 hover:underline">Visit Japan Web</a> ä¸‰äºº<br>è¨˜å¾—è¦å¸¶è­·ç…§ï¼<br>è¨˜å¾—é å…ˆå«è¨ˆç¨‹è»Šï¼<br>æª¢æŸ¥æ—¥å¹£ç¬¬ä¸€å¤© 30,000<br><a href="https://tokiomarinenichido.jp/zh-hant/china2/?fbclid=IwZXh0bgNhZW0CMTAAYnJpZBExRk82Z3ZDV3lYcktjTnV1cQEePZSrkjOlpqFNKIackAUfqU8XL5aFzz0AtZMVKHSC4WZV3laxQno3_qPqqAM_aem_M7uRbknqYTLcb3LMXsKLkQ" target="_blank" class="text-blue-600 hover:underline">è½åœ°å¾Œæ—¥æœ¬ç•¶åœ°æ—…å¹³éšª(å…©äºº)</a></p></div>
                        <div class="tip-box text-sm"><h4 class="font-bold mb-2">æ¼«éŠç¶²è·¯è¨­å®š (å·²é è¨‚9/3 07:00 é–‹é€š)</h4><p><strong>iOSç³»çµ±</strong>ï¼šé»é¸ã€è¨­å®šã€‘â†’ é—œé–‰ã€é£›èˆªæ¨¡å¼ã€‘åŠã€Wi-FiåŠŸèƒ½ã€‘â†’ é»é¸ã€è¡Œå‹•æœå‹™ã€‘â†’é»é¸ã€è¡Œå‹•æ•¸æ“šé¸é …ã€‘â†’é–‹å•Ÿã€æ•¸æ“šæ¼«éŠã€‘ã€‚</p><p><strong>Androidç³»çµ±</strong>ï¼šé»é¸ã€è¨­å®šã€‘â†’é—œé–‰ã€é£›èˆªæ¨¡å¼ã€‘åŠã€Wi-FiåŠŸèƒ½ã€‘â†’é»é¸ã€é€£æ¥ã€‘â†’é»é¸ã€è¡Œå‹•ç¶²è·¯ã€‘â†’é–‹å•Ÿã€æ•¸æ“šæ¼«éŠã€‘ã€‚</p><p><strong>eSIM</strong>:é–‹å•Ÿ Klook App > å¸³æˆ¶ > é è¨‚ > é»é¸â€œæ¿€æ´»â€ã€‚</p></div>
                    </div>
                    <div class="overflow-x-auto"><table class="details-table"><thead><tr><th>æ™‚é–“</th><th>æ´»å‹•å…§å®¹</th><th>å‚™è¨»èˆ‡å»ºè­°</th><th>é ä¼°è²»ç”¨</th></tr></thead><tbody><tr><td><strong>06:00</strong></td><td>èµ·åºŠ</td><td>&nbsp;</td><td>-</td></tr><tr><td><strong>07:00</strong></td><td>è¨ˆç¨‹è»Šå‡ºç™¼</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><strong>13:10</strong></td><td>èˆªç­æŠµé”æ±äº¬ç¾½ç”°æ©Ÿå ´ (HND)</td><td>-é è¨ˆèŠ±è²» 1-1.5 å°æ™‚è¾¦ç†å…¥å¢ƒæ‰‹çºŒèˆ‡é ˜å–è¡Œæã€‚</td><td>-</td></tr><tr><td><strong>14:30</strong></td><td>è³¼è²· Suica å¡èˆ‡äº¤é€š</td><td>- **é¦–æ¬¡å„²å€¼ï¼š** å»ºè­°é¦–æ¬¡å„²å€¼5,000æ—¥åœ“/äºº by ç‰å±±Wallet+ç†Šæœ¬ç†Šå¡ã€‚</td><td>&nbsp;</td></tr><tr><td><strong>15:30</strong></td><td>é£¯åº— Check-in èˆ‡ä¼‘æ¯</td><td>- æ­ä¹˜äº¬æ€¥ç·šæˆ– JR ç·šè‡³å“å·è»Šç«™ã€‚<br>- æ­¥è¡Œè‡³**å“å·ç‹å­å¤§é£¯åº—**è¾¦ç†å…¥ä½ã€‚</td><td>-</td></tr><tr><td><strong>16:10â€“16:30</strong></td><td>å½©è™¹å·´å£«â†’å°å ´</td><td>- æ‹ç«™ç‰Œæ™‚åˆ»</td><td>åªèƒ½ä»˜ç¾, 840å††/4äºº</td></tr><tr><td><strong>16:30â€“20:30</strong></td><td>å°å ´</td><td>- é€›è¡—åƒé£¯<br>- æ¨è–¦äº¬éƒ½å‹ç‰› (DiverCity Tokyo Plazaåº—)</td><td>æ™šé¤ï¼šç´„ 2,000-3,000å††</td></tr><tr><td><strong>20:30â€“21:00</strong></td><td>å›å“å·</td><td>å‚™æ´ï¼šç™¾åˆæµ·é·—/è‡¨æµ·ç·š</td><td>åªèƒ½ä»˜ç¾, 840å††/4äºº</td></tr><tr><td><strong>21:00</strong></td><td>å®µå¤œè³¼ç‰©</td><td>- å‰å¾€å”å‰è¨¶å¾·å“å·åº—ï¼ˆ24å°æ™‚ç‡Ÿæ¥­ï¼‰ã€‚</td><td>è³¼ç‰©ï¼šç´„ 500-1,000å††</td></tr><tr><td><strong>22:00</strong></td><td>è¿”å›é£¯åº—ä¼‘æ¯</td><td>- äº«ç”¨å®µå¤œï¼Œæº–å‚™è¿æ¥ç¬¬äºŒå¤©çš„è¡Œç¨‹ã€‚</td><td>-</td></tr></tbody></table></div>
                    <div class="summary-box"><strong>ç•¶æ—¥ç¸½è¨ˆï¼š</strong> ç´„ 4,180-5,680 æ—¥åœ“ (ä¸å«æ©Ÿç¥¨èˆ‡ä½å®¿)ã€‚<br><strong>äº®é»ï¼š</strong> é«˜æ•ˆåˆ©ç”¨æŠµé”æ—¥å‚æ™šï¼Œç›´è¡å°å ´é«”é©—æ±äº¬ç£å¤œæ™¯èˆ‡ç¾é£Ÿï¼</div>
                    <button class="mt-4 bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-cyan-600 transition" onclick="showMap('map1')">ğŸ“ é¡¯ç¤ºåœ°åœ–</button>
                </div>
                <!-- Day 2 Content -->
                <div id="plan-day2" class="day-plan-content card">
                    <h3 class="text-xl font-bold text-center mb-4 text-blue-500">Day 2: ğŸ° è¿ªå£«å°¼æµ·æ´‹ä¸€æ•´å¤©</h3>
                    <div class="warning-box mb-4"><p><strong>é‡è¦æé†’ï¼š</strong> è¨˜å¾—å…ˆä¸‹è¼‰è¿ªå£«å°¼å®˜æ–¹ Appï¼è¨˜å¾—å¸¶ 18,000 æ—¥å¹£åŒ…è»Šå°¾æ¬¾ã€‚</p></div>
                    <div class="overflow-x-auto"><table class="details-table"><thead><tr><th>æ™‚é–“</th><th>æ´»å‹•å…§å®¹</th><th>å‚™è¨»èˆ‡å»ºè­°</th><th>é ä¼°è²»ç”¨</th></tr></thead><tbody><tr><td><strong>05:00</strong></td><td>èµ·åºŠ</td><td>- æ—©é¤ç‚ºå‰å¤©æº–å‚™è¼•é£Ÿã€‚</td><td></td></tr><tr><td><strong>07:00</strong></td><td>åŒ…è»Šå‰å¾€è¿ªå£«å°¼</td><td>- æ­ä¹˜åŒ…è»Šè‡³æµ·æ´‹æ¨‚åœ’é–€å£ã€‚</td><td></td></tr><tr><td><strong>09:00</strong></td><td>å…¨å¤©æš¢éŠæ±äº¬è¿ªå£«å°¼æµ·æ´‹</td><td>- å»ºè­°ä¸€é–‹åœ’å°±è³¼è²·ç†±é–€è¨­æ–½çš„ DPAã€‚<br>- æ–°åœ’å€ã€Œå¤¢å¹»æ³‰é„‰ã€å»ºè­°ä½¿ç”¨ DPA æˆ–ææ—©æ’éšŠã€‚</td><td>é–€ç¥¨ï¼šç´„ 2,500 å°å¹£/äºº</td></tr><tr><td><strong>12:00</strong></td><td>åˆé¤</td><td>åœ¨åœ’å€å…§ç”¨é¤ï¼Œæ¨è–¦éº¥å“²å€«æˆ–æ°´å¹³ç·šç£é¤å»³ã€‚</td><td>ç´„ 2,000-3,000 æ—¥åœ“/äºº</td></tr><tr><td><strong>18:00</strong></td><td>æ™šé¤èˆ‡å¤œé–“è¡¨æ¼”</td><td>è§€è³å¤œé–“æ°´ä¸Šè¡¨æ¼”ã€Œå …ä¿¡ï¼ï½å¤¢æƒ³ä¹‹æµ·ï½ã€ã€‚</td><td>ç´„ 2,000-3,000 æ—¥åœ“/äºº</td></tr><tr><td><strong>22:00</strong></td><td>è¿”å›é£¯åº—</td><td>- æ™šä¸Š 10 é»å¾è¿ªå£«å°¼æµ·æ´‹æ­åŒ…è»Šè¿”å›ã€‚</td><td>äº¤ä»˜å°¾æ¬¾ 18,000 æ—¥å¹£</td></tr></tbody></table></div>
                    <div class="summary-box"><strong>äº®é»ï¼š</strong> ç›¡æƒ…äº«å—è¿ªå£«å°¼æµ·æ´‹çš„å¥‡å¹»ä¸–ç•Œã€‚</div>
                </div>
                <!-- Day 3 Content -->
                <div id="plan-day3" class="day-plan-content card">
                    <h3 class="text-xl font-bold text-center mb-4 text-red-500">Day 3: æ¾€è°· & æ±äº¬è»Šç«™å¤œé–“æ¢ç´¢</h3>
                    <div class="overflow-x-auto"><table class="details-table"><thead><tr><th>æ™‚é–“</th><th>æ´»å‹•å…§å®¹</th><th>å‚™è¨»èˆ‡å»ºè­°</th><th>é ä¼°è²»ç”¨</th></tr></thead><tbody><tr><td><strong>~10:30</strong></td><td>èµ·åºŠ & é£¯åº—æ—©é¤</td><td>- **ç¡åˆ°è‡ªç„¶é†’ï¼** åœ¨é£¯åº—æˆ–å“å·ç«™å‘¨é‚Šæ‚ é–’åœ°äº«ç”¨æ—©é¤ã€‚</td><td>ç´„ 4,000å††</td></tr><tr><td><strong>10:30â€“11:00</strong></td><td>äº¤é€šï¼šå“å· â†’ æ¾€è°·</td><td>- æ­ä¹˜ **JR å±±æ‰‹ç·š** (å¤–ç’°æ–¹å‘)ï¼Œç´„ 15 åˆ†é˜ç›´é”æ¾€è°·ã€‚</td><td>ç´„ 180å††/äºº</td></tr><tr><td><strong>11:00â€“12:00</strong></td><td>æ¾€è°·åˆæ­¥æ¢ç´¢</td><td>- æŠµé”å¾Œå¯ä»¥å…ˆåœ¨è»Šç«™å‘¨é‚Šç†Ÿæ‚‰ç’°å¢ƒï¼Œæˆ–å»çœ‹çœ‹å¿ çŠ¬å…«å…¬åƒã€‚</td><td>-</td></tr><tr><td><strong>12:00â€“13:30</strong></td><td>åˆé¤ï¼šæ•˜æ•˜è‹‘</td><td>- æ•˜æ•˜è‹‘æ¾€è°·åº—(åœ°å€ï¼šæ±äº¬éƒ½æ¾€è°·å€å®‡ç”°å·ç”º26-2 Sunruiå¤§å¦8F)ã€‚<br>- åˆé–“å¥—é¤è¼ƒåˆ’ç®—ï¼Œäº«ç”¨é«˜ç´šç‡’è‚‰ã€‚</td><td>ç´„ 10,000-14,000å††</td></tr><tr><td><strong>13:30â€“14:15</strong></td><td>æ¾€è°· PARCO</td><td>- ä¸»æ”» 3Coinsï¼Œå¿«é€Ÿç€è¦½å…¶ä»–æ„Ÿèˆˆè¶£çš„æ¨“å±¤ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>14:15â€“14:45</strong></td><td>Disney Store æ——è‰¦åº—</td><td>- å¾ PARCO æ­¥è¡Œç´„ 5-7 åˆ†é˜å³å¯æŠµé”ã€‚<br>- æ¬£è³åŸå ¡èˆ¬çš„å¤–è§€ï¼Œå…¥å…§é¸è³¼è¿ªå£«å°¼å•†å“ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>14:45â€“15:30</strong></td><td>Loft</td><td>- å‰å¾€æ¾€è°· Loft é¸è³¼æ–‡å…·èˆ‡ç”Ÿæ´»é›œè²¨ã€‚<br>- åœ°å€ï¼šæ±äº¬éƒ½æ¾€è°·å€å®‡ç”°å·ç”º21-1</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>15:30â€“16:00</strong></td><td>äº¤é€šï¼šæ¾€è°· â†’ æ±äº¬è»Šç«™</td><td>- æ­ä¹˜ **JR å±±æ‰‹ç·š** (å…§ç’°æ–¹å‘)ï¼Œç´„ 25 åˆ†é˜ç›´é”æ±äº¬è»Šç«™ã€‚</td><td>ç´„ 210å††/äºº</td></tr><tr><td><strong>16:00â€“17:00</strong></td><td>æ™šé¤ï¼šä¸€è˜­æ‹‰éºµ (å…«é‡æ´²åº—)</td><td>- **é›¢å³°ç”¨é¤ï¼** å¾æ±äº¬è»Šç«™å…«é‡æ´²å£æ­¥è¡Œç´„ 5-7 åˆ†é˜ã€‚<br>- é€™å€‹æ™‚é–“é»å¹¾ä¹ä¸ç”¨æ’éšŠã€‚</td><td>ç´„ 3,200-4,800å††</td></tr><tr><td><strong>17:00â€“18:30</strong></td><td>æ±äº¬ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¹ãƒˆãƒªãƒ¼ãƒˆ</td><td>- **æœ¬æ—¥äº®é»ï¼** å°ˆå¿ƒé€›è§’è‰²ä¸€ç•ªè¡—ã€‚<br>- **é‡é»åº—å®¶ï¼š** **ä¸‰éº—é·—æ±äº¬ç«™åº—**ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>18:30â€“19:15</strong></td><td>GranSta Tokyo ä¼´æ‰‹ç¦®</td><td>- é€› GranSta Tokyoï¼Œé¸è³¼æ±äº¬é™å®šçš„ä¼´æ‰‹ç¦®ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>19:15â€“19:45</strong></td><td>æ±äº¬è»Šç«™å¤œæ™¯</td><td>- é€›å®Œå¾Œï¼Œç©¿éè»Šç«™é€šé“è‡³ä¸¸ä¹‹å…§å´ã€‚<br>- æ¬£è³ç´…ç£šå»ºç¯‰çš„å¤œæ™¯ä¸¦æ‹ç…§ç•™å¿µã€‚</td><td>-</td></tr><tr><td><strong>19:45~</strong></td><td>è¿”å›é£¯åº—</td><td>- ç›´æ¥å¾ä¸¸ä¹‹å…§å£çš„æœˆå°æ­ä¹˜ JR å±±æ‰‹ç·šæˆ–ä¸Šé‡æ±äº¬ç·šå¿«é€Ÿè¿”å›å“å·ã€‚</td><td>ç´„ 180å††/äºº</td></tr></tbody></table></div>
                </div>
                <!-- Day 4 Content -->
                <div id="plan-day4" class="day-plan-content card">
                    <h3 class="text-xl font-bold text-center mb-4 text-yellow-500">Day 4: æ± è¢‹èˆ‡éŠ€åº§å‹•æ¼«è³¼ç‰©</h3>
                    <div class="overflow-x-auto"><table class="details-table"><thead><tr><th>æ™‚é–“</th><th>æ´»å‹•å…§å®¹</th><th>å‚™è¨»èˆ‡å»ºè­°</th><th>é ä¼°è²»ç”¨</th></tr></thead><tbody><tr><td><strong>08:00â€“09:00</strong></td><td>èµ·åºŠ & é£¯åº—æ—©é¤</td><td>- å¯ä»¥åœ¨é£¯åº—æˆ–å“å·ç«™å…§å¾å®¹åœ°äº«ç”¨æ—©é¤ã€‚</td><td>ç´„ 4,000å††</td></tr><tr><td><strong>09:00â€“09:45</strong></td><td>äº¤é€šï¼šå“å· â†’ æ± è¢‹</td><td>- æ­ä¹˜ **JR å±±æ‰‹ç·š** (å¤–ç’°æ–¹å‘)ï¼Œç´„ 30 åˆ†é˜ç›´é”æ± è¢‹ã€‚</td><td>ç´„ 210å††/äºº</td></tr><tr><td><strong>09:45â€“10:45</strong></td><td>Bic Camera æ± è¢‹æœ¬åº—è³¼ç‰©</td><td>- **10:00 é–‹é–€**ã€‚å¾è»Šç«™æ±å£æ­¥è¡Œ 3-5 åˆ†é˜å³å¯æŠµé”ã€‚<br>- å¿«é€Ÿæ¡è²·é›»å™¨ã€ç©å…·æˆ–è—¥å¦ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>10:45â€“11:15</strong></td><td>æ­¥è¡Œå‰å¾€ Sunshine City</td><td>- å¾ Bic Camera æ­¥è¡Œè‡³ Sunshine City ç´„ 10 åˆ†é˜ã€‚</td><td>-</td></tr><tr><td><strong>11:20â€“14:00</strong></td><td>Chiikawa Park (ä¾é ç´„æ™‚é–“)</td><td>- **æ ¸å¿ƒè¡Œç¨‹ï¼** æº–æ™‚åœ¨ 11:20-11:40 ä¹‹é–“å…¥å ´ã€‚<br>- äº«å—ç´„ 2.5 å°æ™‚çš„æ¨‚åœ’æ™‚å…‰ã€‚</td><td>é–€ç¥¨å…è²»</td></tr><tr><td><strong>14:00â€“14:30</strong></td><td>äº¤é€šï¼šæ± è¢‹ â†’ éŠ€åº§</td><td>- æ­ä¹˜åœ°éµ**ä¸¸ä¹‹å…§ç·š**ï¼Œå¯**ä¸€ç­è»Šç›´é”**éŠ€åº§ã€‚</td><td>ç´„ 210å††/äºº</td></tr><tr><td><strong>14:30â€“16:00</strong></td><td>åˆé¤ï¼šæ ¹å®¤èŠ±ä¸¸</td><td>- **æœ€ä½³æ™‚æ©Ÿï¼** æŠµé” **Tokyu Plaza éŠ€åº§åº—**ï¼Œé€™å€‹é›¢å³°æ™‚æ®µå¹¾ä¹ä¸ç”¨æ’éšŠã€‚</td><td>ç´„ 6,000-10,000å††</td></tr><tr><td><strong>16:00â€“18:00</strong></td><td>äºŒæ‰‹ç²¾å“åº—å·¡ç¦®</td><td>- **ç¬¬ä¸€ç«™ï¼šKomehyo** (è¦æ¨¡å¤§)ã€‚<br>- **ç¬¬äºŒç«™ï¼šBrand Off**ã€‚<br>- **ç¬¬ä¸‰ç«™ï¼šDaikokuya**ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>18:00â€“18:45</strong></td><td>ä¸­å ´ä¼‘æ¯ & ç”œé»æ™‚é–“</td><td>- **å»ºè­°åœ°é»ï¼šéŠ€åº§ä¸‰è¶Š B2 ç¾é£Ÿè¡—**ã€‚</td><td>ç´„ 2,000-4,000å††</td></tr><tr><td><strong>18:45â€“20:00</strong></td><td>è¦ªå­è³¼ç‰©æ™‚å…‰</td><td>- å‰å¾€ **Sanrio World GINZA** (è¥¿éŠ€åº§ç™¾è²¨)ã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr><tr><td><strong>20:00~</strong></td><td>è¿”å›é£¯åº—</td><td>- å¾éŠ€åº§æ­åœ°éµè½‰ JR å±±æ‰‹ç·šè¿”å›å“å·ã€‚</td><td>ç´„ 180å††/äºº</td></tr></tbody></table></div>
                </div>
                <!-- Day 5 Content -->
                <div id="plan-day5" class="day-plan-content card">
                    <h3 class="text-xl font-bold text-center mb-4 text-green-500">Day 5: ğŸ›« è¼•é¬†é›¢é–‹æ—¥</h3>
                    <div class="overflow-x-auto"><table class="details-table"><thead><tr><th>æ™‚é–“</th><th>æ´»å‹•å…§å®¹</th><th>å‚™è¨»èˆ‡å»ºè­°</th><th>é ä¼°è²»ç”¨</th></tr></thead><tbody><tr><td><strong>07:30-10:30</strong></td><td>é£¯åº—é€€æˆ¿èˆ‡å‘¨é‚Šæ´»å‹•</td><td>- é£¯åº—æˆ–è»Šç«™æ—©é¤ã€‚<br>- æ•´ç†è¡Œæä¸¦è¾¦ç†é€€æˆ¿ã€‚<br>- å¯åœ¨å“å·ç«™å…§ ecute çŸ­æš«è³¼ç‰©ã€‚</td><td>æ—©é¤+è³¼ç‰©: ç´„ 5,200-8,800å††</td></tr><tr><td><strong>10:30-12:30</strong></td><td>å‰å¾€æ©Ÿå ´èˆ‡åˆé¤</td><td>- æ­ä¹˜äº¬æ€¥ç©ºæ¸¯ç·šç›´é”ç¾½ç”°æ©Ÿå ´ã€‚<br>- åœ¨æ©Ÿå ´ç”¨é¤ä¸¦è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚</td><td>äº¤é€š+åˆé¤: ç´„ 5,050-7,050å††</td></tr><tr><td><strong>12:30-14:30</strong></td><td>å®‰æª¢èˆ‡ç™»æ©Ÿ</td><td>- é€šéå®‰æª¢èˆ‡æµ·é—œã€‚<br>- é€›å…ç¨…åº—ï¼Œæº–å‚™ç™»æ©Ÿã€‚</td><td>è¦–å€‹äººæ¶ˆè²»</td></tr></tbody></table></div>
                </div>
            </section>

            <section id="expenses" class="content-section">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">æ¯æ—¥èŠ±è²»ç´€éŒ„</h2>
                <div class="card mb-6">
                    <h3 class="font-bold text-xl mb-4 text-purple-600">æ–°å¢ä¸€ç­†èŠ±è²»</h3>
                    <form id="expense-form" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                        <div class="col-span-1"><label class="block text-sm font-medium">æ—¥æœŸ</label><select id="expense-date" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"><option>9/3</option><option>9/4</option><option>9/5</option><option>9/6</option><option>9/7</option></select></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">æ™‚é–“</label><input type="time" id="expense-time" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">åœ°é»</label><input type="text" id="expense-location" placeholder="å¦‚: æ¾€è°·" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">é¡åˆ¥</label><select id="expense-category" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"><option>é¤é£²</option><option>è³¼ç‰©</option><option>äº¤é€š</option><option>æ™¯é»é–€ç¥¨</option><option>ä½å®¿</option><option>é›œè²»</option><option>å…¶ä»–</option></select></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">æè¿°*</label><input type="text" id="expense-desc" placeholder="å¦‚: ä¸€è˜­æ‹‰éºµ" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm"></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">æ—¥å¹£ (JPY)*</label><input type="number" id="expense-jpy" placeholder="1000" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm"></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">æ”¯ä»˜æ–¹å¼</label><select id="expense-payment" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"><option>ç¾éˆ”</option><option>Suica</option><option>ä¿¡ç”¨å¡</option><option>è¡Œå‹•æ”¯ä»˜</option></select></div>
                        <div class="col-span-1"><label class="block text-sm font-medium">å¡ç‰‡/å‚™è¨»</label><input type="text" id="expense-notes" placeholder="å¦‚: ç†Šæœ¬ç†Šå¡" class="mt-1 w-full rounded-md border-gray-300 shadow-sm"></div>
                        <div class="col-span-full"><button type="submit" class="w-full bg-pink-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-pink-600 transition shadow-md">æ–°å¢ç´€éŒ„</button></div>
                    </form>
                </div>
                <div class="card">
                     <div class="flex flex-wrap justify-between items-center mb-4">
                        <h3 class="font-bold text-xl text-purple-600">èŠ±è²»ç¸½è¦½</h3>
                        <button id="export-md-btn" class="bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 transition shadow-md text-sm">åŒ¯å‡º Markdown</button>
                    </div>
                    <div class="overflow-x-auto mb-4">
                        <table class="w-full text-sm">
                            <thead><tr class="bg-gray-50"><th class="p-2 text-left">æ—¥æœŸ</th><th class="p-2 text-left">åœ°é»</th><th class="p-2 text-left">æè¿°</th><th class="p-2 text-left">æ—¥å¹£</th><th class="p-2 text-left">å°å¹£</th><th class="p-2 text-left">æ”¯ä»˜</th><th class="p-2 text-left">å¡ç‰‡/å‚™è¨»</th><th class="p-2"></th></tr></thead>
                            <tbody id="expense-list"></tbody>
                        </table>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-bold text-xl mt-6 mb-4 text-purple-600">ä¾æ”¯ä»˜æ–¹å¼çµ±è¨ˆ</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead><tr class="bg-gray-50"><th class="p-2 text-left">æ”¯ä»˜æ–¹å¼</th><th class="p-2 text-left">ç¸½é‡‘é¡ (JPY)</th><th class="p-2 text-left">ç¸½é‡‘é¡ (TWD)</th></tr></thead>
                                    <tbody id="summary-list"></tbody>
                                </table>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-xl mt-6 mb-4 text-purple-600">ä¾å¡ç‰‡çµ±è¨ˆ</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead><tr class="bg-gray-50"><th class="p-2 text-left">å¡ç‰‡/å‚™è¨»</th><th class="p-2 text-left">ç¸½é‡‘é¡ (JPY)</th><th class="p-2 text-left">ç¸½é‡‘é¡ (TWD)</th></tr></thead>
                                    <tbody id="card-summary-list"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="shopping-list" class="content-section">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">ğŸ›ï¸ å¾…è²·æ¸…å–®</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-blue-600">Mike</h3>
                        <div id="shopping-list-mike" class="space-y-2 mb-4"></div>
                        <div class="flex gap-2 mt-4"><input type="text" id="new-item-mike" placeholder="æ–°å¢å¾…è²·é …ç›®..." class="flex-grow rounded-md border-gray-300 shadow-sm"><button onclick="addShoppingItem('mike')" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 transition">æ–°å¢</button></div>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-pink-500">Edith</h3>
                        <div id="shopping-list-edith" class="space-y-2 mb-4"></div>
                        <div class="flex gap-2 mt-4"><input type="text" id="new-item-edith" placeholder="æ–°å¢å¾…è²·é …ç›®..." class="flex-grow rounded-md border-gray-300 shadow-sm"><button onclick="addShoppingItem('edith')" class="bg-pink-400 text-white font-bold py-2 px-4 rounded-lg hover:bg-pink-500 transition">æ–°å¢</button></div>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-yellow-500">Nini</h3>
                        <div id="shopping-list-nini" class="space-y-2 mb-4"></div>
                        <div class="flex gap-2 mt-4"><input type="text" id="new-item-nini" placeholder="æ–°å¢å¾…è²·é …ç›®..." class="flex-grow rounded-md border-gray-300 shadow-sm"><button onclick="addShoppingItem('nini')" class="bg-yellow-400 text-white font-bold py-2 px-4 rounded-lg hover:bg-yellow-500 transition">æ–°å¢</button></div>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-green-500">Ada</h3>
                        <div id="shopping-list-ada" class="space-y-2 mb-4"></div>
                        <div class="flex gap-2 mt-4"><input type="text" id="new-item-ada" placeholder="æ–°å¢å¾…è²·é …ç›®..." class="flex-grow rounded-md border-gray-300 shadow-sm"><button onclick="addShoppingItem('ada')" class="bg-green-400 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-500 transition">æ–°å¢</button></div>
                    </div>
                </div>
            </section>

            <section id="todo-list" class="content-section">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">å¾…è¾¦äº‹é …</h2>
                <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-6">
                    <button class="todo-tab-button active" onclick="showTodoTab('todo-7day', event)">7å¤©å…§å¾…è¾¦</button>
                    <button class="todo-tab-button" onclick="showTodoTab('todo-3day', event)">3å¤©å…§å¾…è¾¦</button>
                    <button class="todo-tab-button" onclick="showTodoTab('todo-items', event)">è¦å¸¶ç‰©å“</button>
                </div>
                <div id="todo-7day" class="todo-content active card">
                    <h3 class="font-bold text-xl mb-3 text-purple-600">âœ… è¡Œå‰ 7 å¤©å…§éœ€ç¢ºèªäº‹é …</h3>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>æ‰‹æ©Ÿæ¼«éŠç¶²è·¯ [Edith]</span></label>
                        <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>æ‰‹æ©Ÿæ¼«éŠç¶²è·¯ [Mike]</span></label>
                        <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>æ‰‹æ©Ÿæ¼«éŠç¶²è·¯ [eSim]</span></label>
                        <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>æ‰‹æ©Ÿæ¼«éŠç¶²è·¯ [Nini Watch]</span></label>
                        <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>æé ˜æ—¥å¹£ <span class="font-bold text-pink-500 ml-2">145,000</span></span></label>
                    </div>
                </div>
                <div id="todo-3day" class="todo-content card">
                    <h3 class="font-bold text-xl mb-3 text-purple-600">âœ… è¡Œå‰ 3 å¤©å…§éœ€ç¢ºèªäº‹é …</h3>
                    <div class="space-y-2">
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªè­·ç…§</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªå‡ºç™¼æ—¥å»æ©Ÿå ´è¨ˆç¨‹è»Š</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªè¡Œæè·ŸåŒ…åŒ… [Edith]</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªè¡Œæè·ŸåŒ…åŒ… [Mike]</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªè¡Œæè·ŸåŒ…åŒ… [Nini]</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¢ºèªè¡Œæè·ŸåŒ…åŒ… [Ada]</span></label>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å†æ¬¡ç¢ºèªè¡Œç¨‹ã€é ç´„ã€ç¾é‡‘(145,000)</span></label>
                        <div class="pl-8 space-y-2">
                            <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç‰å±± Wallet + Paypay[ç†Šæœ¬ç†Š]</span></label>
                            <label class="flex items-center"><input type="checkbox" checked class="w-5 h-5 mr-3"><span>ç‰å±± Wallet + æ—¥å¹£å¸³æˆ¶(76,059)</span></label>
                        </div>
                        <label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å†æ¬¡ç¢ºèªä¿¡ç”¨å¡å¯¦é«”å¡åœ‹å¤–æ„Ÿæ‡‰æ”¯ä»˜é–‹é€š</span></label>
                    </div>
                </div>
                <div id="todo-items" class="todo-content">
                    <div class="space-y-6">
                        <div class="card"><h4 class="font-bold text-xl mb-3 text-purple-600">è¡Œæç®±(å¤§)</h4><h5 class="font-bold text-lg mt-4 mb-2 text-pink-500">é£Ÿ ğŸ¥ª</h5><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2"><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ä¿ä¹…ä¹³(6ç½)</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å¥¶ç“¶(å¥¶ç“¶åˆ·)</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å°æœ‹å‹ç”¨é¤å…·(å‰ªåˆ€æ³¨æ„ï¼ï¼)</span></label><div class="col-span-full font-semibold">è—¥å“åŒ…:</div><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>æ­¢ç—›è—¥</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>æ„Ÿå†’è—¥æ°´</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>å‹å…‹æ•</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç”²äº¢è—¥</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>å°ˆæ€é”</span></label></div><h5 class="font-bold text-lg mt-4 mb-2 text-blue-500">è¡£ ğŸ‘•</h5><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2"><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>æ›¿æ›å…§è¡£è¤², è¥ªå­</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>èˆ’é©ä¸Šè¡£ã€ä¸‹è‘—å„æ•¸ä»¶</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>è¼•ä¾¿å¤–å¥—ã€é˜²é¢¨é˜²æ°´å¤–å¥—</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å¸½å­, è¼•ä¾¿é›¨è¡£(è¿ªå£«å°¼)</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç¡è¡£, é«®å¤¾ã€é«®åœˆç­‰</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å°¿å¸ƒ20ç‰‡, è­·å¢Š</span></label></div><h5 class="font-bold text-lg mt-4 mb-2 text-green-500">ä½ ğŸ¨</h5><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2"><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å£“ç¸®è¢‹, æ”¶ç´è¢‹</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç›¥æ´—åŒ…, [Edith] åŒ–å¦å“åŒ…</span></label><div class="col-span-full font-semibold">é›»å™¨åŒ…:</div><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>å……é›»å™¨, è¬ç”¨æ’åº§</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>é›»æºç·š(å…­æ¢)</span></label><label class="flex items-center pl-4"><input type="checkbox" class="w-5 h-5 mr-3"><span>æ‰‹éŒ¶å……é›»ç·š(å…©æ¢)</span></label></div></div>
                        <div class="card"><h4 class="font-bold text-xl mb-3 text-purple-600">éš¨èº«èƒŒåŒ…</h4><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="text-sm"><h5 class="font-bold mb-2">Mike</h5><div class="pl-4 space-y-1"><p class="font-semibold">å¾ŒèƒŒåŒ…:</p><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¤ªé™½çœ¼é¡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è¡Œå‹•é›»æº(å«ç·š)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>iPad Air</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ–‡çŸ³é›»å­é–±è®€å™¨</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>RedMi Note 14 Pro+5G</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è—ç‰™è€³æ©Ÿ</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é›¨å‚˜</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å°ç£æ–‡ä»¶åŒ…</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>ä¿æº«ç“¶(ç©º)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ¶¼é¢¨æ‰‡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ¶¼æ¯›å·¾</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¸½å­</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>éš¨èº«æ–‡ä»¶åŒ…(è­·ç…§)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é›»å‹•åˆ®é¬åˆ€(å……é£½é›»)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é›»å‹•ç‰™åˆ·(å……é£½é›»)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ“´å……é›»æºåˆ†æ¥é ­</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è­‰ä»¶åŒ…</span></label></div><p class="font-semibold mt-2">å´èƒŒåŒ…:</p><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è€³æ©Ÿ</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ—¥å¹£é›¶éŒ¢åŒ…</span></label></div></div></div><div class="text-sm"><h5 class="font-bold mb-2">Edith</h5><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>éš¨èº«ä¹³æ¶²(100CC)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é˜²æ›¬ä¹³</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è¡Œå‹•é›»æº(å«ç·š)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é›¨å‚˜</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è­·å¢Š</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è„–æ• (éå¸¸é‡è¦)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>ç¶é ­é«®çš„å·¥å…·</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¤ªé™½çœ¼é¡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å£ç½©</span></label><p class="font-semibold mt-2">è—¥å“åŒ…:</p><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ­¢ç—›è—¥</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é˜²èšŠæ¶²</span></label></div></div></div><div class="text-sm"><h5 class="font-bold mb-2">Nini</h5><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ°´å£º(ç©º)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¤ªé™½çœ¼é¡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>ç­†è¨˜æœ¬&ç­†</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>é›¨å‚˜</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¸½å­</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ¶¼é¢¨æ‰‡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è¡Œå‹•é›»æº(å«ç·š)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è¡Œç¨‹å°æœ¬</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å£ç½©</span></label></div></div><div class="text-sm"><h5 class="font-bold mb-2">Ada</h5><div class="pl-4 space-y-1"><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>æ°´å£º(ç©º)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>è¡Œå‹•é›»æº(å«ç·š)</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å¤ªé™½çœ¼é¡</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>éš¨èº«å°¿å¸ƒ</span></label><label class="flex items-center"><input type="checkbox" class="w-4 h-4 mr-2"><span>å£ç½©</span></label></div></div></div></div>
                        <div class="card"><h4 class="font-bold text-xl mb-3 text-purple-600">å…¶ä»–è¡Œæ</h4><div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2"><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>è¡Œæç®±ï¼ˆä¸­ï¼‰</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>è¼•ä¾¿æ¨è»Šï¼ˆYoyoï¼‰</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>å®‰æ’«å¨ƒå¨ƒ(Nini/Ada), è‡­è‡­è¢«</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>ç´€å¿µå“æ“´å……ç”¨è¢‹å­</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>æŠ˜ç–Šé‡é¤å¢Š</span></label></div></div>
                        <div class="card"><h4 class="font-bold text-xl mb-3 text-gray-500">æœ€å¾Œæé†’</h4><div class="grid grid-cols-1 gap-y-2"><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>æ¯æ—¥å‡ºç™¼å‰å†æ¬¡æª¢æŸ¥é‡è¦è­‰ä»¶åŠè²´é‡ç‰©</span></label><label class="flex items-center"><input type="checkbox" class="w-5 h-5 mr-3"><span>æŸ¥é–±ç›®çš„åœ°ç¦å¸¶ç‰©å“ã€æµ·é—œé™ä»¤</span></label></div></div>
                    </div>
                </div>
            </section>

            <section id="resources" class="content-section">
                <h2 class="text-3xl font-bold text-[var(--title-color)] mb-6">å…¶ä»–è³‡è¨Š</h2>
                <div class="space-y-6">
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-purple-600">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§ é¡å¤–å»ºè­°</h3>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li>**å®¶åº­æˆå“¡è€ƒé‡ï¼š** å…©å€‹å¥³å…’ï¼ˆ10æ­²/4æ­²ï¼‰çš„å¹´é½¡å·®ç•°è¼ƒå¤§ï¼Œè¡Œç¨‹å®‰æ’ä¸Šéœ€å…¼é¡§å…©è€…çš„èˆˆè¶£ã€‚</li>
                            <li>**å½ˆæ€§è¡Œç¨‹ï¼š** è‹¥å­©å­ç–²æ†Šæˆ–å°æŸæ™¯é»ç‰¹åˆ¥æ„Ÿèˆˆè¶£ï¼Œå¯é©æ™‚èª¿æ•´è¡Œç¨‹ã€‚</li>
                            <li>**ç·Šæ€¥æƒ…æ³ï¼š** éš¨èº«æ”œå¸¶è­·ç…§å½±æœ¬ã€æ—…éŠä¿éšªè³‡è¨Šï¼Œä¸¦è¨˜ä¸‹å°ç£é§æ—¥ä»£è¡¨è™•çš„é›»è©±ã€‚</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-purple-600">ğŸš¨ æ‡‰æ€¥èˆ‡æ›¿ä»£æ–¹æ¡ˆ</h3>
                         <ul class="list-disc list-inside space-y-2 text-sm">
                            <li>**å¤©æ°£ä¸ä½³æˆ–é å®šå¤±æ•—ï¼š** å¯å°‡æˆ¶å¤–è¡Œç¨‹èª¿æ•´ç‚ºå®¤å…§è³¼ç‰©ä¸­å¿ƒæˆ–æ™¯é»ï¼ˆå¦‚æ±äº¬éµå¡”ã€æ™´ç©ºå¡”ï¼‰ã€‚</li>
                            <li>**äº¤é€šå»¶èª¤ï¼š** æ±äº¬çš„éµè·¯ç³»çµ±éå¸¸ç™¼é”ï¼Œè‹¥JRç·šå»¶èª¤ï¼Œå¯å¿«é€ŸæŸ¥è©¢Google Mapså°‹æ‰¾æ›¿ä»£çš„åœ°éµè·¯ç·šã€‚</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-purple-600">ğŸ¥ å¥åº·èˆ‡å®‰å…¨ç´°ç¯€</h3>
                        <ul class="list-disc list-inside space-y-2 text-sm">
                            <li>**æ±äº¬ç•¶åœ°é†«ç™‚è³‡æºï¼š** å“å·è»Šç«™é™„è¿‘æœ‰NTTæ±æ—¥æœ¬é—œæ±é†«é™¢æˆ–å“å·ç¶œåˆé†«é™¢ã€‚</li>
                            <li>**æœ€æ–°å…¥å¢ƒè¦æ±‚ï¼š** å‡ºç™¼å‰å‹™å¿…æŸ¥è©¢æ—¥æœ¬å°ç£äº¤æµå”æœƒæˆ–æ—¥æœ¬è§€å…‰å±€çš„å®˜æ–¹ç¶²ç«™ã€‚</li>
                            <li>**å€‹äººè¡›ç”Ÿï¼š** éš¨èº«æ”œå¸¶é…’ç²¾æ¿•ç´™å·¾æˆ–ä¹¾æ´—æ‰‹æ¶²ã€‚</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="mapModal" class="modal">
        <div class="modal-content bg-transparent"><span class="close-button" onclick="closeMap()">&times;</span><div id="mapContent" class="map-container rounded-2xl overflow-hidden"></div></div>
    </div>

    <script>
        function showSection(sectionId,event){event.preventDefault();document.querySelectorAll(".content-section").forEach(e=>{e.classList.remove("active")});document.getElementById(sectionId).classList.add("active");document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(e=>{e.classList.remove("active")});const linkSelector=`a[onclick="showSection('${sectionId}', event)"]`;document.querySelectorAll(linkSelector).forEach(e=>e.classList.add("active"));if(window.innerWidth<=768){document.getElementById("sidebar")?.classList.remove("open")}}
        function showDayPlan(dayId,event){event.preventDefault();document.querySelectorAll(".day-plan-content").forEach(e=>{e.classList.remove("active")});document.getElementById(dayId).classList.add("active");document.querySelectorAll(".day-tab-button").forEach(e=>{e.classList.remove("active")});event.currentTarget.classList.add("active")}
        function showTodoTab(tabId,event){event.preventDefault();document.querySelectorAll(".todo-content").forEach(e=>{e.classList.remove("active")});document.getElementById(tabId).classList.add("active");document.querySelectorAll(".todo-tab-button").forEach(e=>{e.classList.remove("active")});event.currentTarget.classList.add("active")}
        function toggleSidebar(){document.getElementById("sidebar")?.classList.toggle("open")}
        const mapModal=document.getElementById("mapModal"),mapContent=document.getElementById("mapContent"),maps={map1:'<iframe src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d51906.10616947932!2d19.70962510824444!3d35.59981935008062!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e3!4m5!1s0x6018640ba43192e3%A0xd32c3a9d146f8df!2z5pel5pys5p2x5Lqs6YO95aSn55Sw5Y2A576955Sw56m65riv576955Sw5qmf5aC0ICjmnbHkuqzlnIvpmpvmqZ_loLQpIChITkQp!3m2!1d35.5482964!2d139.7779951!4m5!1s0x60188a5760190fa7%A0x762af933935909b0!2z5ZOB5bed546L5a2Q5aSn6aOv5bqXIDQgQ2hvbWUtMTAtMzAgVGFrYW5hd2EsIE1pbmF0byBDaXR5LCBUb2t5byAxMDgtODYxMeaXpeacrA!3m2!1d35.6279119!2d139.7367526!5e0!3m2!1szh-TW!2stw!4v1755583534678!5m2!1szh-TW!2stw" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>'};
        function showMap(mapId){mapContent.innerHTML=maps[mapId];mapModal.style.display="block"}
        function closeMap(){mapContent.innerHTML="";mapModal.style.display="none"}
        window.onclick=function(event){if(event.target==mapModal){closeMap()}};

        // --- Expense Tracker Logic ---
        const expenseForm = document.getElementById('expense-form');
        const expenseList = document.getElementById('expense-list');
        const summaryList = document.getElementById('summary-list');
        const cardSummaryList = document.getElementById('card-summary-list');
        const exportBtn = document.getElementById('export-md-btn');
        const FIXED_RATE = 0.21;
        const storageKey = 'tokyoTripExpenses_v4'; 

        function getExpenses() { return JSON.parse(localStorage.getItem(storageKey)) || []; }
        function saveExpenses(expenses) { localStorage.setItem(storageKey, JSON.stringify(expenses)); }

        function renderExpenses() {
            const expenses = getExpenses();
            expenseList.innerHTML = '';
            
            if (expenses.length === 0) {
                expenseList.innerHTML = '<tr><td colspan="8" class="text-center text-gray-400 py-4">å°šæœªæœ‰ä»»ä½•èŠ±è²»ç´€éŒ„</td></tr>';
            } else {
                expenses.forEach((expense, index) => {
                    const twd = Math.round(expense.jpy * FIXED_RATE);
                    const row = document.createElement('tr');
                    row.className = 'border-b';
                    row.innerHTML = `
                        <td class="p-2">${expense.date || '-'}</td>
                        <td class="p-2">${expense.location || '-'}</td>
                        <td class="p-2">${expense.desc}</td>
                        <td class="p-2">${expense.jpy.toLocaleString()}</td>
                        <td class="p-2">${twd.toLocaleString()}</td>
                        <td class="p-2">${expense.payment}</td>
                        <td class="p-2">${expense.notes || '-'}</td>
                        <td class="p-2 text-center">
                            <button onclick="deleteExpense(${index})" class="text-red-500 hover:text-red-700 text-xs">åˆªé™¤</button>
                        </td>
                    `;
                    expenseList.appendChild(row);
                });
            }
            renderSummary(expenses);
        }

        function renderSummary(expenses) {
            const paymentSummary = { 'ç¾éˆ”': {jpy:0, twd:0}, 'Suica': {jpy:0, twd:0}, 'ä¿¡ç”¨å¡': {jpy:0, twd:0}, 'è¡Œå‹•æ”¯ä»˜': {jpy:0, twd:0} };
            const cardSummary = {};
            let totalJpy = 0;
            let totalTwd = 0;

            expenses.forEach(expense => {
                const twd = Math.round(expense.jpy * FIXED_RATE);
                if (paymentSummary.hasOwnProperty(expense.payment)) {
                    paymentSummary[expense.payment].jpy += expense.jpy;
                    paymentSummary[expense.payment].twd += twd;
                }
                if (expense.notes) {
                    const cardName = expense.notes.trim();
                    if (!cardSummary[cardName]) {
                        cardSummary[cardName] = { jpy: 0, twd: 0 };
                    }
                    cardSummary[cardName].jpy += expense.jpy;
                    cardSummary[cardName].twd += twd;
                }
                totalJpy += expense.jpy;
                totalTwd += twd;
            });

            summaryList.innerHTML = '';
            for (const method in paymentSummary) {
                const row = document.createElement('tr');
                row.className = 'border-b';
                row.innerHTML = `<td class="p-2 font-medium">${method}</td><td class="p-2">${paymentSummary[method].jpy.toLocaleString()} JPY</td><td class="p-2">${paymentSummary[method].twd.toLocaleString()} TWD</td>`;
                summaryList.appendChild(row);
            }
            const totalRow = document.createElement('tr');
            totalRow.className = 'font-bold bg-gray-50';
            totalRow.innerHTML = `<td class="p-2">ç¸½è¨ˆ</td><td class="p-2">${totalJpy.toLocaleString()} JPY</td><td class="p-2">${totalTwd.toLocaleString()} TWD</td>`;
            summaryList.appendChild(totalRow);
            
            cardSummaryList.innerHTML = '';
            if (Object.keys(cardSummary).length > 0) {
                 for (const card in cardSummary) {
                    const row = document.createElement('tr');
                    row.className = 'border-b';
                    row.innerHTML = `<td class="p-2 font-medium">${card}</td><td class="p-2">${cardSummary[card].jpy.toLocaleString()} JPY</td><td class="p-2">${cardSummary[card].twd.toLocaleString()} TWD</td>`;
                    cardSummaryList.appendChild(row);
                }
            } else {
                cardSummaryList.innerHTML = '<tr><td colspan="3" class="text-center text-gray-400 py-4">ç„¡å¡ç‰‡/å‚™è¨»ç´€éŒ„</td></tr>';
            }
        }

        function addExpense(event) {
            event.preventDefault();
            const newExpense = {
                date: document.getElementById('expense-date').value,
                time: document.getElementById('expense-time').value,
                location: document.getElementById('expense-location').value,
                category: document.getElementById('expense-category').value,
                desc: document.getElementById('expense-desc').value,
                jpy: parseFloat(document.getElementById('expense-jpy').value),
                payment: document.getElementById('expense-payment').value,
                notes: document.getElementById('expense-notes').value,
            };

            if (!newExpense.desc || isNaN(newExpense.jpy)) { return; }

            const expenses = getExpenses();
            expenses.push(newExpense);
            saveExpenses(expenses);
            renderExpenses();
            expenseForm.reset();
        }

        function deleteExpense(index) {
            const expenses = getExpenses();
            expenses.splice(index, 1);
            saveExpenses(expenses);
            renderExpenses();
        }

        function exportToMarkdown() {
            const expenses = getExpenses();
            if (expenses.length === 0) { return; }

            let mdContent = '| æ—¥æœŸ | æ™‚é–“ | åœ°é» | é¡åˆ¥ | æè¿° | æ—¥å¹£ | å°å¹£ | æ”¯ä»˜ | å¡ç‰‡/å‚™è¨» |\n';
            mdContent += '|:---|:---|:---|:---|:---|---:|---:|:---|:---|\n';

            expenses.forEach(e => {
                const twd = Math.round(e.jpy * FIXED_RATE);
                mdContent += `| ${e.date || ''} | ${e.time || ''} | ${e.location || ''} | ${e.category || ''} | ${e.desc} | ${e.jpy} | ${twd} | ${e.payment} | ${e.notes || ''} |\n`;
            });
            
            mdContent += '\n### ä¾æ”¯ä»˜æ–¹å¼çµ±è¨ˆ\n\n';
            mdContent += '| æ”¯ä»˜æ–¹å¼ | ç¸½é‡‘é¡ (JPY) | ç¸½é‡‘é¡ (TWD) |\n|:---|---:|---:|\n';
            document.getElementById('summary-list').querySelectorAll('tr').forEach(row => {
                const cells = row.querySelectorAll('td');
                mdContent += `| ${cells[0].innerText} | ${cells[1].innerText.replace(' JPY', '')} | ${cells[2].innerText.replace(' TWD', '')} |\n`;
            });

            mdContent += '\n### ä¾å¡ç‰‡çµ±è¨ˆ\n\n';
            mdContent += '| å¡ç‰‡/å‚™è¨» | ç¸½é‡‘é¡ (JPY) | ç¸½é‡‘é¡ (TWD) |\n|:---|---:|---:|\n';
             document.getElementById('card-summary-list').querySelectorAll('tr').forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length > 1) { // Avoid empty row
                    mdContent += `| ${cells[0].innerText} | ${cells[1].innerText.replace(' JPY', '')} | ${cells[2].innerText.replace(' TWD', '')} |\n`;
                }
            });

            const blob = new Blob([mdContent], { type: 'text/markdown;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tokyo-expenses.md';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // --- Shopping List Logic ---
        const shoppingListStorageKey = 'tokyoShoppingList_v2';
        const initialShoppingList = {
            mike: [
                { text: 'THE GUNDAM BASE: MGSD é‹¼å½ˆåŸºåœ°é™å®š è‡ªç”±é‹¼å½ˆï¼»é€æ˜é…è‰²ï¼½ ($1,980)', checked: false },
                { text: 'THE GUNDAM BASE: MGSD çµé­”é‹¼å½ˆ ($1,990)', checked: false }
            ],
            edith: [],
            nini: [],
            ada: []
        };

        function getShoppingList() {
            const stored = localStorage.getItem(shoppingListStorageKey);
            return stored ? JSON.parse(stored) : initialShoppingList;
        }
        function saveShoppingList(list) {
            localStorage.setItem(shoppingListStorageKey, JSON.stringify(list));
        }

        function renderShoppingList() {
            const list = getShoppingList();
            for (const person in list) {
                const container = document.getElementById(`shopping-list-${person}`);
                if (container) {
                    container.innerHTML = '';
                    list[person].forEach((item, index) => {
                        const itemEl = document.createElement('div');
                        itemEl.className = 'flex items-center justify-between';
                        itemEl.innerHTML = `
                            <label class="flex items-center flex-grow">
                                <input type="checkbox" onchange="toggleShopItem('${person}', ${index})" class="w-5 h-5 mr-3" ${item.checked ? 'checked' : ''}>
                                <span class="${item.checked ? 'line-through text-gray-400' : ''}">${item.text}</span>
                            </label>
                            <button onclick="deleteShopItem('${person}', ${index})" class="text-red-400 hover:text-red-600 text-xs p-1">åˆªé™¤</button>
                        `;
                        container.appendChild(itemEl);
                    });
                }
            }
        }

        function addShoppingItem(person) {
            const inputEl = document.getElementById(`new-item-${person}`);
            const text = inputEl.value.trim();
            if (text) {
                const list = getShoppingList();
                list[person].push({ text: text, checked: false });
                saveShoppingList(list);
                renderShoppingList();
                inputEl.value = '';
            }
        }

        function toggleShopItem(person, index) {
            const list = getShoppingList();
            list[person][index].checked = !list[person][index].checked;
            saveShoppingList(list);
            renderShoppingList();
        }

        function deleteShopItem(person, index) {
            const list = getShoppingList();
            list[person].splice(index, 1);
            saveShoppingList(list);
            renderShoppingList();
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            renderExpenses();
            renderShoppingList();
            // Add event listeners for the "Add" buttons
            ['mike', 'edith', 'nini', 'ada'].forEach(person => {
                const inputEl = document.getElementById(`new-item-${person}`);
                if (inputEl) {
                    inputEl.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault(); // Prevent form submission
                            addShoppingItem(person);
                        }
                    });
                }
            });
        });

        expenseForm.addEventListener('submit', addExpense);
        exportBtn.addEventListener('click', exportToMarkdown);

    </script>
</body>
</html>
